<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ラブライブシリーズ声優年齢自動計算ページ</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.10.4/dayjs.min.js"
      integrity="sha512-0fcCRl828lBlrSCa8QJY51mtNqTcHxabaXVLPgw/jPA5Nutujh6CbTdDgRzl9aSPYW/uuE7c4SffFUQFBAy6lg=="
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <div id="app">
      <h1>現地参加したライブ一覧</h1>
      <p>どこかにまとめていないと忘れてしまうので・・・</p>
      <p>現地参加ライブ数：{{this.lives.length}}公演</p>

      <div v-for="live in lives" :key="live.name">
        <p class="card">
          名前：{{live.name}} <br />
          公演日：{{ convertDate(live.day) }} <br />
          場所： {{ live.place }}<br />
          <a href="{{live.link}}">リンク</a>
        </p>
      </div>
    </div>
  </body>
  <script>
    var app = new Vue({
      el: "#app",
      data: {
        lives: [],
      },
      mounted: function () {
        fetch("./live.json")
          .then((response) => response.json())
          .then((data) => (this.lives = this.sortYear(data, true)));
      },
      methods: {
        convertDate: (date) => {
          return dayjs(date).format("YYYY年MM月DD日");
        },
        sortYear: (data, asc) => {
          return data.sort((a, b) => {
            const result = dayjs(a.day).isAfter(dayjs(b.day));
            if (asc) {
              return result ? -1 : 1;
            } else {
              return result ? 1 : -1;
            }
          });
        },
      },
    });
  </script>
  <style>
    @import url(//fonts.googleapis.com/earlyaccess/notosansjapanese.css);

    html {
      font-family: "Noto Sans Japanese", "Hiragino Kaku Gothic ProN", Meiryo,
        sans-serif;
    }

    .card {
      padding: 1rem;
      background-color: #eee;
    }
  </style>
</html>
