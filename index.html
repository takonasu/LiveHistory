<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live History - „É©„Ç§„ÉñÂèÇÂä†Â±•Ê≠¥</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.prod.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <div class="header">
            <h1>üé§ Live History</h1>
            <p>ÂèÇÂä†„Åó„Åü„É©„Ç§„Éñ„ÅÆË®òÈå≤</p>
        </div>

        <div v-if="loading" class="loading">
            Ë™≠„ÅøËæº„Åø‰∏≠...
        </div>

        <div v-if="error" class="error">
            {{ error }}
        </div>

        <template v-if="!loading && !error">
            <div class="year-filter">
                <button 
                    class="year-button"
                    :class="{ active: selectedYear === null }"
                    @click="selectedYear = null"
                >
                    „Åô„Åπ„Å¶
                </button>
                <button 
                    v-for="year in availableYears" 
                    :key="year"
                    class="year-button"
                    :class="{ active: selectedYear === year }"
                    @click="selectedYear = year"
                >
                    {{ year }}Âπ¥
                </button>
            </div>

            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number">{{ filteredLiveData.length }}</div>
                    <div class="stat-label">ÂèÇÂä†„É©„Ç§„ÉñÊï∞</div>
                </div>
                <div v-if="selectedYear === null" class="stat-card">
                    <div class="stat-number">{{ uniqueYears }}</div>
                    <div class="stat-label">Âπ¥Êï∞</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{ uniquePlaces }}</div>
                    <div class="stat-label">‰ºöÂ†¥Êï∞</div>
                </div>
            </div>

            <div class="live-grid">
                <div 
                    v-for="live in filteredLiveData" 
                    :key="live.day" 
                    class="live-card"
                    :class="{ 'has-ticket': live.ticketImg }"
                    @click="live.ticketImg && openModal(live)"
                >
                    <div class="live-date">{{ formatDate(live.day) }}</div>
                    <div class="live-name">{{ live.name }}</div>
                    <div class="live-place">{{ live.place }}</div>
                    <div v-if="live.memo" class="live-memo">{{ live.memo }}</div>
                    <a :href="live.link" target="_blank" class="live-link" @click.stop>
                        Ë©≥Á¥∞„ÇíË¶ã„Çã
                    </a>
                </div>
            </div>
        </template>

        <!-- „ÉÅ„Ç±„ÉÉ„ÉàÁîªÂÉè„É¢„Éº„ÉÄ„É´ -->
        <div v-if="selectedLive" class="modal-overlay" @click="closeModal">
            <div class="modal-content" @click.stop>
                <button class="modal-close" @click="closeModal">√ó</button>
                <img 
                    :src="getTicketImagePath(selectedLive.ticketImg)" 
                    :alt="selectedLive.name"
                    class="modal-image"
                    @error="handleImageError"
                >
                <div class="modal-info">
                    <div class="modal-title">{{ selectedLive.name }}</div>
                    <div class="modal-date">{{ formatDate(selectedLive.day) }}</div>
                    <div class="modal-place">üìç {{ selectedLive.place }}</div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>